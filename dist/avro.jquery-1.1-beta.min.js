/*! JS Avro Phonetic 1.1-beta http://omicronlab.com | https://raw.github.com/torifat/jsAvroPhonetic/master/MPL-1.1.txt */
(function(b){var e={init:function(a,c){var d={bn:!0};a&&b.extend(d,a);var f=function(){this.cb=c;b(this).data("isBangla",!b(this).data("isBangla"));this.cb&&typeof this.cb==="function"&&this.cb(b(this).data("isBangla"))};return this.each(function(){b(this).bind("keydown.avro",e.keydown);b(this).bind("switch.avro",f);b(this).data("isBangla",!d.bn);b(this).trigger("switch")})},destroy:function(){return this.each(function(){b(this).unbind(".avro")})},keydown:function(a){var c=a.keyCode||a.which||a.charCode; c===77&&a.ctrlKey&&!a.altKey&&!a.shiftKey&&(b(this).trigger("switch"),a.preventDefault());b(this).data("isBangla")&&(c===32||c===13||c===9)&&e.replace(this)},replace:function(a){var c=e.getCaret(a),d=e.findLast(a,c),b=OmicronLab.Avro.Phonetic.parse(a.value.substring(d,c));document.selection?(a=document.selection.createRange(),a.moveStart("character",-1*Math.abs(c-d)),a.text=b,a.collapse(!0)):(a.value=a.value.substring(0,d)+b+a.value.substring(c),a.selectionStart=a.selectionEnd=c-(Math.abs(c-d)-b.length))}, findLast:function(a,c){for(var b=c-1;a.value.charAt(b)!==" "&&b>0;)b--;return b},getCaret:function(a){if(a.selectionStart)return a.selectionStart;else if(document.selection){a.focus();var b=document.selection.createRange();if(b==null)return 0;var a=a.createTextRange(),d=a.duplicate();a.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",a);return d.text.length}return 0}};b.fn.avro=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"|| !a)return e.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.avro")}})(jQuery);
