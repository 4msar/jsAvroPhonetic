/*! JS Avro Phonetic 1.1-beta http://omicronlab.com | https://raw.github.com/torifat/jsAvroPhonetic/master/MPL-1.1.txt */
(function(b){var d={init:function(a,e){var c={bangla:!0,notification:!1};a&&b.extend(c,a);return this.each(function(){if(!("bangla"in this))this.bangla=c.bangla,this.callback=e,b(this).bind("keydown.avro",d.keydown),b(this).bind("notify.avro",d.notify),b(this).bind("switch.avro",d.switchKb),b(this).bind("focus.avro",d.focus),b(this).bind("blur.avro",d.blur),b(this).bind("ready.avro",d.ready),c.notification&&b(this).bind("notification.avro",d.notification),b(this).trigger("ready")})},notify:function(){typeof this.callback=== "function"&&this.callback(this.bangla)},switchKb:function(a,e){typeof e==="undefined"&&(e=!this.bangla);this.bangla=e;b(this).trigger("notify");b(this).trigger("notification")},focus:function(){b(this).trigger("notify");b(this).next().fadeIn()},blur:function(){b(this).next().fadeOut()},ready:function(){b(this).trigger("notify");b(this).trigger("notification")},notification:function(){if(!b(this).next().hasClass("avro_notification")){var a=b("<div>").prop("class","avro_notification").css({display:"none", background:"#111",color:"#fff",position:"absolute",top:b(this).offset().top,left:b(this).offset().left+b(this).outerWidth()});b(this).after(a)}b(this).next().html('<code style="display:block;padding:2px 5px;text-align:right;font:normal 14px monospace;">'+(this.bangla?"\u0985":"E")+"</code>")},destroy:function(){return this.each(function(){b(this).unbind(".avro")})},keydown:function(a){var e=a.which;e===77&&a.ctrlKey&&!a.altKey&&!a.shiftKey&&(b(this).trigger("switch",[!this.bangla]),a.preventDefault()); this.bangla&&(e===32||e===13||e===9)&&d.replace(this)},replace:function(a){var b=d.getCaret(a),c=d.findLast(a,b),f=OmicronLab.Avro.Phonetic.parse(a.value.substring(c,b));document.selection?(a=document.selection.createRange(),a.moveStart("character",-1*Math.abs(b-c)),a.text=f,a.collapse(!0)):(a.value=a.value.substring(0,c)+f+a.value.substring(b),a.selectionStart=a.selectionEnd=b-(Math.abs(b-c)-f.length))},findLast:function(a,b){for(var c=b-1;a.value.charAt(c)!==" "&&c>0;)c--;return c},getCaret:function(a){if(a.selectionStart)return a.selectionStart; else if(document.selection){a.focus();var b=document.selection.createRange();if(b==null)return 0;var a=a.createTextRange(),c=a.duplicate();a.moveToBookmark(b.getBookmark());c.setEndPoint("EndToStart",a);return c.text.length}return 0}};b.fn.avro=function(a){if(a in["init","destroy"])return d[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return d.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.avro")}})(jQuery);
