/*! JS Avro Phonetic 1.1.1-beta http://omicronlab.com | https://raw.github.com/torifat/jsAvroPhonetic/master/MPL-1.1.txt */
(function(b){var d={init:function(a,c){var f={bangla:!0};a&&b.extend(f,a);return this.each(function(){if(!("bangla"in this))this.bangla=f.bangla,this.callback=c||b.noop,b(this).bind("keydown.avro",d.keydown),b(this).bind("notify.avro",d.notify),b(this).bind("switch.avro",d.switchKb),b(this).bind("focus.avro",d.focus),b(this).bind("ready.avro",d.ready),b(this).trigger("ready")})},notify:function(){this.callback(this.bangla)},switchKb:function(a,c){typeof c==="undefined"&&(c=!this.bangla);this.bangla= c;b(this).trigger("notify")},focus:function(){b(this).trigger("notify")},ready:function(){b(this).trigger("notify")},destroy:function(){return this.each(function(){b(this).unbind(".avro")})},keydown:function(a){var c=a.which;if(c===77&&a.ctrlKey&&!a.altKey&&!a.shiftKey)return b(this).trigger("switch",[!this.bangla]),!1;this.bangla&&(c===32||c===13||c===9)&&d.replace(this)},replace:function(a){var c=d.getCaret(a),b=d.findLast(a,c),e=OmicronLab.Avro.Phonetic.parse(a.value.substring(b,c));document.selection? (a=document.selection.createRange(),a.moveStart("character",-1*Math.abs(c-b)),a.text=e,a.collapse(!0)):(a.value=a.value.substring(0,b)+e+a.value.substring(c),a.selectionStart=a.selectionEnd=c-(Math.abs(c-b)-e.length))},findLast:function(a,c){for(var b=c-1;b>0;){var d=a.value.charAt(b);if(d===" "||d==="
"||d==="	"||d==="")break;b--}return b},getCaret:function(a){if(a.selectionStart)return a.selectionStart;else if(document.selection){a.focus();var b=document.selection.createRange();if(b===null)return 0; var a=a.createTextRange(),d=a.duplicate();a.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",a);return d.text.length}return 0}};b.fn.avro=function(a){if(a in["init","destroy"])return d[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return d.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.avro")}})(jQuery);
