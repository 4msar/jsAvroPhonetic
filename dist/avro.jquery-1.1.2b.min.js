/*! JS Avro Phonetic 1.1.2b http://omicronlab.com | https://raw.github.com/torifat/jsAvroPhonetic/master/MPL-1.1.txt */
(function(a){var b={init:function(c,d){var e={bangla:!0};return c&&a.extend(e,c),this.each(function(){if("bangla"in this)return;this.bangla=e.bangla,this.callback=d||a.noop,a(this).bind("keydown.avro",b.keydown),a(this).bind("notify.avro",b.notify),a(this).bind("switch.avro",b.switchKb),a(this).bind("focus.avro",b.focus),a(this).bind("ready.avro",b.ready),a(this).trigger("ready")})},notify:function(a){this.callback(this.bangla)},switchKb:function(b,c){typeof c=="undefined"&&(c=!this.bangla),this.bangla=c,a(this).trigger("notify")},focus:function(b){a(this).trigger("notify")},ready:function(b){a(this).trigger("notify")},destroy:function(){return this.each(function(){a(this).unbind(".avro")})},keydown:function(c){var d=c.which;if(d===77&&c.ctrlKey&&!c.altKey&&!c.shiftKey)return a(this).trigger("switch",[!this.bangla]),!1;if(!this.bangla)return;(d===32||d===13||d===9)&&b.replace(this)},replace:function(a){var c=b.getCaret(a),d=b.findLast(a,c),e=OmicronLab.Avro.Phonetic.parse(a.value.substring(d,c));if(document.selection){var f=document.selection.createRange();f.moveStart("character",-1*Math.abs(c-d)),f.text=e,f.collapse(!0)}else a.value=a.value.substring(0,d)+e+a.value.substring(c),a.selectionStart=a.selectionEnd=c-(Math.abs(c-d)-e.length)},findLast:function(b,c){var d=c-1;while(d>0){var e=b.value.charAt(d);if(a.trim(e)==="")break;d--}return d},getCaret:function(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(b===null)return 0;var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length}return 0}};a.fn.avro=function(c){if(c in["init","destroy"])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.init.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.avro")}})(jQuery);
