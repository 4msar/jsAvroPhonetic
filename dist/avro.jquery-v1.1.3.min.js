/*! JS Avro Phonetic v1.1.3 http://omicronlab.com | https://raw.github.com/torifat/jsAvroPhonetic/master/MPL-1.1.txt */
(function(e){var t={init:function(n,r){var i={bangla:!0};return n&&e.extend(i,n),this.each(function(){if("bangla"in this)return;this.bangla=i.bangla,this.callback=r||e.noop,e(this).bind("keydown.avro",t.keydown),e(this).bind("notify.avro",t.notify),e(this).bind("switch.avro",t.switchKb),e(this).bind("focus.avro",t.focus),e(this).bind("ready.avro",t.ready),e(this).trigger("ready")})},notify:function(e){this.callback(this.bangla)},switchKb:function(t,n){typeof n=="undefined"&&(n=!this.bangla),this.bangla=n,e(this).trigger("notify")},focus:function(t){e(this).trigger("notify")},ready:function(t){e(this).trigger("notify")},destroy:function(){return this.each(function(){e(this).unbind(".avro")})},keydown:function(n){var r=n.which;if(r===77&&n.ctrlKey&&!n.altKey&&!n.shiftKey)return e(this).trigger("switch",[!this.bangla]),!1;if(!this.bangla)return;(r===32||r===13||r===9)&&t.replace(this)},replace:function(e){var n=t.getCaret(e),r=t.findLast(e,n),i=OmicronLab.Avro.Phonetic.parse(e.value.substring(r,n));if(document.selection){var s=document.selection.createRange();s.moveStart("character",-1*Math.abs(n-r)),s.text=i,s.collapse(!0)}else e.value=e.value.substring(0,r)+i+e.value.substring(n),e.selectionStart=e.selectionEnd=n-(Math.abs(n-r)-i.length)},findLast:function(t,n){var r=n-1;while(r>0){var i=t.value.charAt(r);if(e.trim(i)==="")break;r--}return r},getCaret:function(e){if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(t===null)return 0;var n=e.createTextRange(),r=n.duplicate();return n.moveToBookmark(t.getBookmark()),r.setEndPoint("EndToStart",n),r.text.length}return 0}};e.fn.avro=function(n){if(n in["init","destroy"])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.avro")}})(jQuery);
